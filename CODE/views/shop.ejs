<!DOCTYPE html>
<html lang="en">
<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <link rel="stylesheet" type="text/css" href="/css/style.css">
   <link rel="stylesheet" type="text/css" href="/css/shop.css">
   <title>Shop</title>
</head>
<body>
   <nav class="nav">
      <div class="main-header">
         <a href="/"><img src="/images/logo.ico" alt="eCommerce Solution"></a>
      </div>
      <div class="search-bar-container">
         <input class="search-bar" id="search-bar" type="text" placeholder="Search.....">
         <ul class="search-suggestions" id="search-suggestions">
         </ul>
      </div>
      <div class="dropdown-container">
         <button id="dropdown-hamburger" class="dropdown-hamburger">&#9776;</button>
         <ul id="dropdown" class="dropdown">
            <%if(user) {%>
               <li><a href="/user/<%=user.id%>"><%=user.name%></a></li>
               <%if(user.type === 'admin') {%>
                  <li><a href="/moderation/admin">Admin Panel</a></li>
                  <li><a href="/moderation/moderator">Moderation</a></li>
               <%}%>
               <%if(user.type === 'moderator') {%>
                  <li><a href="/moderation/moderator">Moderation</a></li>
               <%}%>
               <%if(user.isOwner) {%>
                  <!-- uses js to change page. -->
                  <li id="update-shop-info" class="new-shop-li">Update shop</li>
                  <!-- uses js to change page. -->
                  <li id="add-product" class="new-shop-li">Add Product</li>
                  <li><a href="/shop/<%=shop.id%>/delete">Delete Shop</a></li>
               <%}%>
               <li><a href="/cart">My Cart</a></li>
               <li><a href="/auth/logout">Sign Out</a></li>
            <%} else {%>
               <li><a href="/auth/register">Sign Up</a></li>
               <li><a href="/auth/login">Sign In</a></li>
            <%}%>
         </ul>
      </div>
   </nav>
   <div class="main-body">
      <div class="main-content">
         <div class="shop-info">
            <p class="shop-name"><%=shop.name%></p>
         </div>
         <img class="shop-img" src="/images/<%=shop.image%>">
         <h1 class="product-heading">Our Products</h1>
         <div class="all-products">
            <%if(products.length) {%>
               <%products.forEach(prod => {%>
                  <div class="product">
                     <a href="/product/<%=prod.id%>"><img class="product-image" src="/images/<%=prod.image%>"></a>
                     <a href="/product/<%=prod.id%>"><p class="product-name"><%=prod.name%></p></a>
                     <p class="product-price">Tk <%=prod.price%></p>
                  </div>
               <%})%>
            <%} else {%>
               <h1 class="message">No Products were added yet.</h1>
            <%}%>
         </div>
      </div>
   </div>
   <script type="text/javascript" src="/js/script.js"></script>
   <script type="text/javascript" src="/js/shop.js"></script>
</body>
</html>
